import{u as o,a as h,b as x,j as s,L as m}from"./index-a75d0303.js";import{i as b}from"./man-ac27bdbf.js";import{f as j}from"./format-66ee9ebe.js";const f=()=>{const{data:a}=o(),{data:n,isLoading:l,isError:t,error:i}=h(),[d,{isLoading:r}]=x();return l?s.jsx("div",{className:"text-center py-5",children:"Loading your profile..."}):t?s.jsx("div",{className:"container d-flex justify-content-center align-items-center",style:{height:"100vh",backgroundColor:"#f8d7da"},children:s.jsxs("div",{className:"text-center bg-white p-5 rounded shadow",children:[s.jsx("h4",{className:"text-danger",children:"Booking Required"}),s.jsx("p",{children:"Please log in and book an appointment before viewing your profile."}),s.jsx("p",{className:"text-danger",children:i==null?void 0:i.message}),s.jsxs(m,{to:"/",className:"btn btn-outline-primary mt-3",children:[s.jsx("i",{className:"bi bi-house-door-fill me-2"}),"Back to Home"]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("nav",{className:"navbar navbar-expand-lg bg-warning shadow-sm",children:s.jsxs("div",{className:"container",children:[s.jsx("a",{className:"navbar-brand fw-bold",href:"#",children:"Customer Portal"}),s.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:s.jsx("span",{className:"navbar-toggler-icon"})}),s.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[s.jsx("ul",{className:"navbar-nav me-auto",children:s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"/",children:"Home"})})}),s.jsxs("button",{className:"btn btn-outline-primary","data-bs-toggle":"offcanvas","data-bs-target":"#profileSidebar",children:[s.jsx("i",{className:"bi bi-person-circle me-1"})," View Profile"]})]})]})}),s.jsxs("div",{className:"offcanvas offcanvas-start",tabIndex:-1,id:"profileSidebar",children:[s.jsxs("div",{className:"offcanvas-header border-bottom",children:[s.jsx("h5",{className:"offcanvas-title text-primary",children:"Customer Profile"}),s.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas"})]}),s.jsxs("div",{className:"offcanvas-body",children:[s.jsx("div",{className:"text-center mb-3",children:s.jsx("img",{src:b,alt:"Profile",className:"rounded-circle shadow",style:{width:"100px",height:"100px",objectFit:"cover"}})}),s.jsxs("div",{className:"px-3",children:[s.jsx("h6",{className:"text-secondary text-center mb-3",children:"Profile Details"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Name:"})," ",(a==null?void 0:a.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",(a==null?void 0:a.email)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Mobile:"})," ",(a==null?void 0:a.mobile)||"N/A"]})]}),s.jsx("div",{className:"text-center mt-4",children:s.jsx("button",{className:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas",children:"Close"})})]})]}),s.jsx("div",{className:"container mt-4",children:s.jsxs("div",{className:"card shadow border-0",children:[s.jsx("div",{className:"card-header bg-primary text-white",children:s.jsx("h5",{className:"mb-0",children:"Your Bookings"})}),s.jsx("div",{className:"card-body p-0",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-bordered m-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:"Location"}),s.jsx("th",{children:"Reason"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Payment"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Action"})]})}),s.jsxs("tbody",{children:[n==null?void 0:n.map((e,c)=>s.jsxs("tr",{children:[s.jsx("td",{children:c+1}),s.jsx("td",{children:e.location}),s.jsx("td",{children:e.reason}),s.jsx("td",{children:j(new Date(e.date),"dd-MM-yyyy")}),s.jsx("td",{children:s.jsx("span",{className:`badge ${e.payment_status==="Paid"?"bg-success":"bg-danger"}`,children:e.payment_status})}),s.jsx("td",{children:e.booking_status==="Pending"?s.jsx("span",{className:"badge bg-warning text-dark",children:"Pending"}):e.booking_status==="Confirmed"?s.jsx("span",{className:"badge bg-success",children:"Confirmed"}):s.jsx("span",{className:"badge bg-secondary",children:"Canceled"})}),s.jsx("td",{children:e.booking_status==="Pending"||e.booking_status==="Confirmed"?s.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>d(e._id),disabled:r,children:r?"Canceling...":"Cancel"}):s.jsx("span",{className:"text-muted",children:"N/A"})})]},e._id)),(n==null?void 0:n.length)===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted py-3",children:"No bookings found."})})]})]})})})]})})]})};export{f as default};
