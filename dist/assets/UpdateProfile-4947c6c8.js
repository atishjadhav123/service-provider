import{g as x,h as j,r as t,j as e,f as N}from"./index-a75d0303.js";import{u as g,c as y,a as l}from"./index.esm-3210bf28.js";const w=({loggedInUserId:c})=>{const{data:a,isLoading:m,isError:p}=x(c),[h,{isSuccess:n,isError:E}]=j(),[d,b]=t.useState("");t.useState();const r=g({enableReinitialize:!0,initialValues:{name:a?a.name:"",email:a?a.email:"",mobile:a?a.mobile:"",role:a?a.role:"",location:a?a.location:"",city:a?a.city:"",price:a?a.price:"",photo:a?a.photo:""},validationSchema:y({name:l().required("Enter Name"),email:l().required("Enter Email").email(),mobile:l().required("Enter Mobile"),role:l().required("Enter Role"),location:l().required("Enter Location"),city:l().required("Enter City"),price:l().required("Enter Price"),photo:l().required("Enter Photo")}),onSubmit:(i,{resetForm:u})=>{const s=new FormData;s.append("name",i.name),s.append("email",i.email),s.append("mobile",i.mobile),s.append("password",i.password),s.append("role",i.role),s.append("location",i.location),s.append("city",i.city),s.append("price",i.price),i.photo&&s.append("photo",i.photo),h({_id:a._id,fd:s}).unwrap().then(()=>{u()}).catch(f=>{b(f.message)})}}),o=i=>N({"form-control my-2":!0,"is-invalid":r.touched[i]&&r.errors[i],"is-valid":r.touched[i]&&!r.errors[i]});return t.useEffect(()=>{n&&alert("Profile updated successfully")},[n]),m?e.jsx("div",{children:"Loading..."}):p?e.jsx("div",{children:"Error loading profile"}):a?e.jsx("div",{className:"container mt-5",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-lg-6 col-md-8 col-sm-10",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("h3",{children:"Update Your Profile"})}),e.jsxs("div",{className:"card shadow-lg",children:[e.jsx("div",{className:"card-header bg-gradient-primary text-white text-center py-3",children:e.jsx("h4",{className:"mb-0",children:"Update Profile"})}),e.jsxs("div",{className:"card-body p-4",children:[d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label fw-bold",children:"Name"}),e.jsx("input",{id:"name",className:o("name"),...r.getFieldProps("name"),type:"text",placeholder:"Enter your name"}),r.touched.name&&r.errors.name&&e.jsx("span",{className:"invalid-feedback",children:r.errors.name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label fw-bold",children:"Email"}),e.jsx("input",{id:"email",className:o("email"),...r.getFieldProps("email"),type:"email",placeholder:"Enter your email"}),r.touched.email&&r.errors.email&&e.jsx("span",{className:"invalid-feedback",children:r.errors.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"mobile",className:"form-label fw-bold",children:"Mobile"}),e.jsx("input",{id:"mobile",className:o("mobile"),...r.getFieldProps("mobile"),type:"text",placeholder:"Enter your mobile number"}),r.touched.mobile&&r.errors.mobile&&e.jsx("span",{className:"invalid-feedback",children:r.errors.mobile})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"photo",className:"form-label fw-bold",children:"Profile Photo"}),e.jsx("input",{id:"photo",className:o("photo"),type:"file",onChange:i=>r.setFieldValue("photo",i.currentTarget.files[0])}),r.touched.photo&&r.errors.photo&&e.jsx("span",{className:"invalid-feedback",children:r.errors.photo})]}),e.jsx("div",{className:"d-grid mb-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:r.isSubmitting,children:r.isSubmitting?e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status"}):"Update Profile"})})]})]})]})]})})}):e.jsx("div",{children:"No profile found for the logged-in user"})};export{w as default};
